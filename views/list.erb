<h2 style="text-align: center;"><%= @type_name %>一覧</h2>
<div class="input-group mb-2">
  <div class="input-group-prepend">
    <span class="input-group-text">検索</span>
  </div>
  <input type="text" class="form-control" id="search">
  <div class="input-group-append">
    <span class="input-group-text" id="listcount"></span>
  </div>
</div>
<div class="d-flex justify-content-end form-inline mb-2">
  <label for="sort-sel">表示順：</label>
  <div class="dropdown">
    <button type="button" id="sort-sel" class="btn btn-outline-secondary dropdown-toggle"
      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
    <div class="dropdown-menu" aria-labelledby="sort-sel">
      <a class="sort-item dropdown-item" onclick='selSortMode("登録日(昇順)", "created_at", false)'>登録日(昇順)</a>
      <a class="sort-item dropdown-item" onclick='selSortMode("登録日(降順)", "created_at", true)'>登録日(降順)</a>
      <% if @type == "book" %>
      <a class="sort-item dropdown-item" onclick='selSortMode("タイトル(昇順)", "title", false)'>タイトル(昇順)</a>
      <a class="sort-item dropdown-item" onclick='selSortMode("タイトル(降順)", "title", true)'>タイトル(降順)</a>
      <% else %>
      <a class="sort-item dropdown-item" onclick='selSortMode("名前(昇順)", "name", false)'>名前(昇順)</a>
      <a class="sort-item dropdown-item" onclick='selSortMode("名前(降順)", "name", true)'>名前(降順)</a>
      <% end %>
    </div>
  </div>
</div>
<table id="list" class="table"></table>
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center" id="pagenav">
  </ul>
</nav>

<script src="/js/list.js?ver=<%= $version %>"></script>
<script>
  mode = "<%= @type %>";
  // ロード時に一覧取得
  $(function () {
    $.ajaxSetup({ async: false });
    $.getJSON(`/api/get_list?type=${mode}`, data => orig_list = data);
    $.ajaxSetup({ async: true });
    disp_list = orig_list
    selSortMode("登録日(昇順)", "created_at", false)
  });
</script>