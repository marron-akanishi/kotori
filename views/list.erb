<h2 style="text-align: center;"><%= @type_name %>一覧</h2>
<div class="input-group mb-2">
  <div class="input-group-prepend">
    <span class="input-group-text">検索</span>
  </div>
  <input type="text" class="form-control" id="search">
  <div class="input-group-append">
    <span class="input-group-text" id="listcount"></span>
  </div>
</div>
<div class="d-flex justify-content-end form-inline mb-2">
  <label for="sort-sel">表示順：</label>
  <select id="sort-sel" class="form-control" onchange="setSort(this)">
    <option value="created_at,desc" selected>登録日(降順)</option>
    <option value="created_at,asc">登録日(昇順)</option>
    <option value="name,desc">名前(降順)</option>
    <option value="name,asc">名前(昇順)</option>
  </select>
</div>
<table id="list" class="table"></table>
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center" id="pagenav">
  </ul>
</nav>

<script src="/js/list.js?ver=<%= $version %>"></script>
<script>
  mode = "<%= @type %>";
  // ロード時に一覧取得
  $(function () {
    $.ajaxSetup({ async: false });
    $.getJSON(`/api/get_list?type=${mode}`, data => orig_list = data);
    $.ajaxSetup({ async: true });
    disp_list = orig_list
    selSortMode("created_at", true)
  });
</script>